<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout=http://www.ultraq.net.nz/thymeleaf/layout
      layout:decorate="~{layouts/layout}">
<head>
    <link th:href="@{/css/community/mypage_basic.css}" rel="stylesheet">
</head>
<th:block layout:fragment="script">
    <script th:inline="javascript">
        $(document).ready(function(){
            const errorMessage = [[${errorMessage}]]
            if(errorMessage){
                alert(errorMessage);
            }
            bindDomEvent();
        });

        function bindDomEvent(){
            $(".custom-file-input").on("change", function(){
                let fileName = $(this).val().split("\\").pop();
                let fileExt = fileName.substring(fileName.lastIndexOf(".")+1);
                console.log("fileName =====> ", fileName);
                console.log("fileExt =====> ", fileExt);

                fileExt = fileExt.toLowerCase();

                if(fileExt != "jpg" && fileExt != "jpeg" &&
                    fileExt != "gif" && fileExt != "png" && fileExt != "bmp"){
                    alert("이미지 파일만 등록이 가능합니다.");
                    return;
                }
                $(this).siblings(".custom-file-label").html(fileName);
            });
        }

    </script>
</th:block>
<div layout:fragment="content">
    <div class="blog-content">
        <!-- <div class="main-conten">


          <div class="sidebar">
                <div class="profile">
                    <img src="../img/profile.png" alt="">
                    <h3>ADIOS</h3>

                </div>
                <ul>
                    <li>
                        <a href="community_freenotice_board.html" class="active">
                            <span class="item">자유게시판</span>
                        </a>
                    </li>
                    <li>
                        <a href="community_notice_board.html">

                            <span class="item">공지사항</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">이달의 공연 소식</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">공연 후기 공유</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">문화 공연 관련 정보 제공</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">공연 후속 프로그램 소개</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">공연 랭킹판/추천</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">

                            <span class="item">공연 정보 요청</span>
                        </a>
                    </li>
                </ul>
            </div>


        </div>-->

        <div id="write-area">
            <h4>글을 작성하는 공간입니다.</h4>
            <form role="form" method="post" th:object="${boardCommunityFormDTO}" enctype="multipart/form-data">
                <input type="hidden" th:field="*{communityNo}">
                <div id="maintitle">
                    <div class="input-group-prepend">
                        <span class="input-group-text">제목</span>
                    </div>
                    <input type="text" th:field="*{communityTitle}" class="form-control" placeholder="제목을 작성해주세요">
                </div>
                <div id="content-in">
                    <textarea th:field="*{communityContent}" class="form-control" aria-label="With textarea"></textarea>
                </div>
                <!--/*@thymesVar id="boardCommunityImgDTOList" type=""*/-->
                <div th:if="${#lists.isEmpty(boardCommunityImgDTOList)}">
                    <div class="form-group" th:each="num : ${#numbers.sequence(1,3)}">
                        <div class="custom-file img-div">
                            <input type="file" class="custom-file-input" name="boardImgFile">
                            <label class="custom-file-label" th:text="'게시판이미지' + ${num}"></label>
                        </div>
                    </div>
                </div>
                <div th:if="${not #lists.isEmpty(boardCommunityFormDTO)}">
                    <div class="form-group" th:each="boardImgDTO : ${boardCommunityImgDTOList}">
                        <div class="custom-file img-div">
                            <input type="file" class="custom-file-input" name="boardCommunityImgFile">
                            <p>파일버튼</p>
                            <input type="hidden" name="boardImgIds" th:value="${boardCommunityFormDTO.communityNo}">
                            <label class="custom-file-label"
                                   th:text="${not #strings.isEmpty(boardCommunityImgDTOList)}
                      ? ${boardImgDTO} : '게시판이미지' + ${status.index + 1}"></label>
                        </div>
                    </div>
                </div>
                <div id="inputbt">
                    <button type="reset" id="inputbtt" th:href="@{/community/board}">취소</button>
                    <button type="submit" th:formaction="@{/community/board/new}">글작성</button>
                    <input type="hidden" th:name="${_csrf.parameterName}"
                          th:value="${_csrf.token}">
                    <!-- <button type="submit" id="inputbtt">글 작성</button> -->
                </div>
            </form>
        </div>
    </div>
</div>
</div>
</html>